<?xml version="1.0" encoding="utf-8" standalone="yes"?><Drawing Units="cm" PPU="28.34646" Major="1" Subdivisions="10" Zoom="0.3648551" ViewPositionX="508.816" ViewPositionY="85.66031" ActiveLayer="0" PrintSize="8.5,11"><Layer Name="Layer 1" Visible="True" Locked="False" CreationDate="08/28/2015 21:10:47"><Group><Rectangle X="-2" Y="11" Width="28" Height="5" FillColor="#DFEDD6" /><Rectangle X="7.999999" Y="13.5" Width="6.999999" Height="1.5" FillColor="#DFEDD6" StrokeColor="#FFFFFF" Text="Cowboy server" FontSize="24" FontColor="#4B7935" /></Group><Rectangle X="0.5" Y="12" Width="6.5" Height="3" FillColor="#D3E3FC" Text="Ezwebframe service broker" FontSize="18" FontColor="#0045A3" FigureId="0" /><Rectangle X="17.5" Y="12" Width="6.5" Height="3" FillColor="#D3E3FC" Text="Cowboy response" FontSize="18" FontColor="#0045A3" FigureId="1" /><LineConnection X1="5.321102" Y1="12" X2="10.55811" Y2="7" Text="Http request" FontSize="18" StartDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="0" EndConnectionPointId="FIGURE_CENTER" EndFigureId="2" /><LineConnection X1="13.74561" Y1="7" X2="19.1336" Y2="12" Text="Http response" FontSize="18" StartDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="2" EndConnectionPointId="FIGURE_CENTER" EndFigureId="1" /><Rectangle X="4.129211" Y="4" Width="16" Height="3" FillColor="#FEFCE0" Text="Wechat player text" FontSize="24" FontColor="#8D8528" FigureId="2" /><Group><Rectangle X="-2" Y="19" Width="28" Height="16" FillColor="#DFEDD6" /><Rectangle X="7" Y="32.09092" Width="11" Height="1.45454" FillColor="#DFEDD6" StrokeColor="#FFFFFF" Text="command_dispatcher.erl" FontSize="24" FontColor="#4B7935" /></Group><Rectangle X="1" Y="25" Width="5.5" Height="2" FillColor="#D3E3FC" Text="Extract GET params" FontSize="18" FontColor="#0045A3" FigureId="3" /><Group><Rectangle X="-2" Y="40" Width="28" Height="23" FillColor="#DFEDD6" /><Rectangle X="8" Y="59.5" Width="8.5" Height="1.5" FillColor="#DFEDD6" StrokeColor="#FFFFFF" Text="login_server.erl" FontSize="24" FontColor="#4B7935" /></Group><Stencil Name="Diamond" FigureId="4"><PathShape FillColor="#FFDAD9" Definition="M11.74222 40.98444 L8.984451 42.49222 L11.74222 44 L14.5 42.49222 Z " PathClosed="True" Text="is uid registered" FontSize="13" FontColor="#B9160E" /></Stencil><Rectangle X="4.5" Y="57" Width="14.5" Height="2" FillColor="#FFFFFF" Text="Login player by dynamically starts player fsm with player uid and enters born scene or latest scene" FontSize="18" FontColor="#0045A3" FigureId="5" /><LineConnection X1="11.74223" Y1="44" X2="11.74223" Y2="47.48444" Text="True" FontSize="18" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="4" EndConnectionPointId="FIGURE_CENTER" EndFigureId="6" /><Rectangle X="8.499999" Y="20" Width="6.5" Height="2.5" FillColor="#D3E3FC" Text="Compose xml response" FontSize="18" FontColor="#0045A3" FigureId="7" /><Stencil Name="Diamond" FigureId="8"><PathShape FillColor="#FFDAD9" Definition="M21.75777 24.5 L19 26.00778 L21.75777 27.51556 L24.51555 26.00778 Z " PathClosed="True" Text="Validate signature" FontSize="13" FontColor="#B9160E" /></Stencil><LineConnection X1="6.5" Y1="26.00119" X2="19.00218" Y2="26.00659" Text="Validation params" FontSize="18" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="3" EndConnectionPointId="FIGURE_CENTER" EndFigureId="8" /><Rectangle X="1" Y="30.5" Width="5.5" Height="2" FillColor="#D3E3FC" Text="Extract params from xml post message, and invoke module" FontSize="18" FontColor="#0045A3" FigureId="9" /><LineConnection X1="19.98752" Y1="26.54769" X2="6.5" Y2="30.66127" Text="Pass validation" FontSize="18" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="8" EndConnectionPointId="FIGURE_CENTER" EndFigureId="9" /><LineConnection X1="6.116889" Y1="38.68657" X2="6.199317" Y2="38.68657" /><Group><Rectangle X="-42" Y="40" Width="28" Height="23" FillColor="#DFEDD6" /><Rectangle X="-32" Y="59.5" Width="8.5" Height="1.5" FillColor="#DFEDD6" StrokeColor="#FFFFFF" Text="register_fsm.erl" FontSize="24" FontColor="#4B7935" /></Group><Rectangle X="-25" Y="41" Width="7" Height="3" FillColor="#D3E3FC" Text="Process regsitration state" FontSize="18" FontColor="#0045A3" FigureId="10" /><LineConnection X1="8.985623" Y1="42.49286" X2="-18" Y2="42.49918" Text="False: dyanamically starts register_fsm with player uid&#xA;or&#xA;pass player inputs for next register_fsm state" FontSize="18" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="4" EndConnectionPointId="FIGURE_CENTER" EndFigureId="10" /><Rectangle X="-37.5" Y="41" Width="6.5" Height="3" FillColor="#D3E3FC" Text="Prepare state content by register_fsm nls_server" FontSize="18" FontColor="#0045A3" FigureId="11" /><LineConnection X1="-22.78532" Y1="49.45352" X2="-31.77686" Y2="44" Text="False" FontSize="18" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="12" EndConnectionPointId="FIGURE_CENTER" EndFigureId="11" /><LineConnection X1="3.75" Y1="15" X2="3.75" Y2="25" Text="Integrated http request details" FontSize="18" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="0" EndConnectionPointId="FIGURE_CENTER" EndFigureId="3" /><LineConnection X1="20.28266" Y1="25.3065" X2="14.37932" Y2="22.5" Text="Fail: return composed error message" FontSize="18" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="8" EndConnectionPointId="FIGURE_CENTER" EndFigureId="7" /><Group><Rectangle X="34" Y="40" Width="28" Height="23" FillColor="#DFEDD6" /><Rectangle X="44" Y="59.5" Width="8.5" Height="1.5" FillColor="#DFEDD6" StrokeColor="#FFFFFF" Text="player_fsm.erl" FontSize="24" FontColor="#4B7935" /></Group><Stencil Name="Diamond" FigureId="6"><PathShape FillColor="#FFE2D8" Definition="M11.74222 47.48444 L8.984451 48.99222 L11.74222 50.5 L14.5 48.99222 Z " PathClosed="True" Text="is player logged in" FontSize="13" FontColor="#B9160E" /></Stencil><LineConnection X1="11.74353" Y1="50.49929" X2="11.74914" Y2="57" Text="False: after user input “login”" FontSize="18" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="6" EndConnectionPointId="FIGURE_CENTER" EndFigureId="5" /><Group><Rectangle X="69" Y="40" Width="28" Height="23" FillColor="#DFEDD6" /><Rectangle X="79" Y="59.5" Width="8.500004" Height="1.5" FillColor="#DFEDD6" StrokeColor="#FFFFFF" Text="scene_fsm.erl" FontSize="24" FontColor="#4B7935" /></Group><Rectangle X="75" Y="47" Width="7" Height="3" FillColor="#D3E3FC" Text="Process leave scene event if any" FontSize="18" FontColor="#0045A3" FigureId="13" /><Rectangle X="88" Y="41" Width="7" Height="3" FillColor="#D3E3FC" Text="Prepare current scene content by scene_fsm nls_server" FontSize="18" FontColor="#0045A3" FigureId="14" /><LineConnection X1="78.5" Y1="50" X2="78.5" Y2="54" Text="Direction" FontSize="18" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="13" /><Stencil Name="Diamond" FigureId="12"><PathShape FillColor="#FFDAD9" Definition="M-21.47791 48.73871 L-24.23568 50.24649 L-21.47791 51.75427 L-18.72013 50.24649 Z " PathClosed="True" Text="is registration done" FontSize="13" FontColor="#B9160E" /></Stencil><LineConnection X1="-21.49572" Y1="44" X2="-21.4822" Y2="48.74105" EndDecoration="ARROW" /><LineConnection X1="-19.54506" Y1="50.69751" X2="7.464469" Y2="57" Text="True" FontSize="18" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="12" EndConnectionPointId="FIGURE_CENTER" EndFigureId="5" /><Rectangle X="17" Y="29.5" Width="6.5" Height="2" FillColor="#D3E3FC" Text="Dispatch command" FontSize="18" FontColor="#0045A3" FigureId="15" /><Rectangle X="44" Y="41" Width="7" Height="3" FillColor="#D3E3FC" Text="Process player state if any" FontSize="18" FontColor="#0045A3" FigureId="16" /><Group><Rectangle X="33" Y="23" Width="28" Height="12" FillColor="#FFFFFF" /><Rectangle X="42" Y="32.81818" Width="11" Height="1.090912" FillColor="#FFFFFF" StrokeColor="#FFFFFF" Text="Commands" FontSize="24" FontColor="#4B7935" /></Group><Rectangle X="35" Y="24" Width="5" Height="2" FillColor="#D3E3FC" Text="direction.erl" FontSize="18" FontColor="#0045A3" FigureId="17" /><LineConnection X1="23.38636" Y1="29.5" X2="35" Y2="25.7971" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="15" EndConnectionPointId="FIGURE_CENTER" EndFigureId="17" /><ElbowPathConnection Text="True" FontSize="18" Filled="False" Definition="M14.49999 48.99222 L20 48.99222 C20.1375 48.99222 20.25 48.87972 20.25 48.74222 L20.25 31.5" EndDecoration="ARROW" CornerRadius="0.25" StartConnectionPointId="FIGURE_CENTER" StartFigureId="6" EndConnectionPointId="FIGURE_CENTER" EndFigureId="15" /><OrthoginalPathConnection Text="Uid &amp; command arguments" FontSize="18" Filled="False" Definition="M3.75 32.5 L3.75 36.49222 C3.75 36.62972 3.8625 36.74222 4 36.74222 L11.49223 36.74222 C11.62973 36.74222 11.74223 36.85472 11.74223 36.99222 L11.74223 40.98444" EndDecoration="ARROW" CornerRadius="0.25" StartConnectionPointId="FIGURE_CENTER" StartFigureId="9" EndConnectionPointId="FIGURE_CENTER" EndFigureId="4" /><ElbowPathConnection Filled="False" Definition="M91.5 41 L91.5 21.5 C91.5 21.3625 91.3875 21.25 91.25 21.25 L15 21.25" EndDecoration="ARROW" CornerRadius="0.25" Direction="VERTICAL_HORIZONTAL" StartConnectionPointId="FIGURE_CENTER" StartFigureId="14" EndConnectionPointId="FIGURE_CENTER" EndFigureId="7" /><LineConnection X1="51" Y1="42.5" X2="75" Y2="47.73636" Text="Direction" FontSize="18" EndDecoration="ARROW" EndConnectionPointId="FIGURE_CENTER" EndFigureId="13" /><Rectangle X="35" Y="28" Width="5" Height="2" FillColor="#D3E3FC" Text="logout.erl" FontSize="18" FontColor="#0045A3" FigureId="18" /><ElbowPathConnection Filled="False" Definition="M40 25 L47.25 25 C47.3875 25 47.5 25.1125 47.5 25.25 L47.5 41" EndDecoration="ARROW" CornerRadius="0.25" StartConnectionPointId="FIGURE_CENTER" StartFigureId="17" EndConnectionPointId="FIGURE_CENTER" EndFigureId="16" /><LineConnection X1="23.5" Y1="30.21739" X2="35" Y2="29.21739" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="15" EndConnectionPointId="FIGURE_CENTER" EndFigureId="18" /><ElbowPathConnection Filled="False" Definition="M40 29 L47.25 29 C47.3875 29 47.5 29.1125 47.5 29.25 L47.5 41" EndDecoration="ARROW" CornerRadius="0.25" StartConnectionPointId="FIGURE_CENTER" StartFigureId="18" EndConnectionPointId="FIGURE_CENTER" EndFigureId="16" /><Rectangle X="35" Y="32" Width="5" Height="2" FillColor="#D3E3FC" Text="lang.erl" FontSize="18" FontColor="#0045A3" FigureId="19" /><ElbowPathConnection Filled="False" Definition="M40 33 L47.25 33 C47.3875 33 47.5 33.1125 47.5 33.25 L47.5 41" EndDecoration="ARROW" CornerRadius="0.25" StartConnectionPointId="FIGURE_CENTER" StartFigureId="19" EndConnectionPointId="FIGURE_CENTER" EndFigureId="16" /><LineConnection X1="23.5" Y1="30.97101" X2="35" Y2="32.63768" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="15" EndConnectionPointId="FIGURE_CENTER" EndFigureId="19" /><Group><Rectangle X="-42" Y="23" Width="28" Height="12" FillColor="#FFFFFF" /><Rectangle X="-33" Y="32.81818" Width="11" Height="1.090908" FillColor="#FFFFFF" StrokeColor="#FFFFFF" Text="Commands" FontSize="24" FontColor="#4B7935" /></Group><ElbowPathConnection Filled="False" Definition="M-34.25 41 L-34.25 21.5 C-34.25 21.3625 -34.1375 21.25 -34 21.25 L8.499999 21.25" EndDecoration="ARROW" CornerRadius="0.25" Direction="VERTICAL_HORIZONTAL" /><Rectangle X="-24" Y="24" Width="5" Height="2" FillColor="#D3E3FC" Text="rereg.erl" FontSize="18" FontColor="#0045A3" FigureId="20" /><LineConnection X1="17" Y1="30.07186" X2="-19" Y2="25.32934" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="15" EndConnectionPointId="FIGURE_CENTER" EndFigureId="20" /><LineConnection X1="-21.5" Y1="26" X2="-21.5" Y2="41" Text="After player logged out" FontSize="18" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="20" EndConnectionPointId="FIGURE_CENTER" EndFigureId="10" /><Rectangle X="44" Y="54" Width="7" Height="3" FillColor="#D3E3FC" Text="Terminate player fsm" FontSize="18" FontColor="#0045A3" FigureId="21" /><LineConnection X1="51" Y1="43.53409" X2="75.0527" Y2="54" Text="Logout" FontSize="18" EndDecoration="ARROW" EndConnectionPointId="FIGURE_CENTER" EndFigureId="22" /><OrthoginalPathConnection Text="Prepare logout text" FontSize="18" Filled="False" Definition="M44 55.5 L29.75 55.5 C29.6125 55.5 29.5 55.3875 29.5 55.25 L29.5 21.5 C29.5 21.3625 29.3875 21.25 29.25 21.25 L15 21.25" EndDecoration="ARROW" CornerRadius="0.25" Direction="EAST_WEST" StartConnectionPointId="FIGURE_CENTER" StartFigureId="21" EndConnectionPointId="FIGURE_CENTER" EndFigureId="7" /><Rectangle X="75" Y="54" Width="7" Height="3" FillColor="#D3E3FC" Text="Remove player uid from scene state" FontSize="18" FontColor="#0045A3" FigureId="22" /><LineConnection X1="75" Y1="55.5" X2="51" Y2="55.5" Text="Logout" FontSize="18" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="22" EndConnectionPointId="FIGURE_CENTER" EndFigureId="21" /><LineConnection X1="81.28571" Y1="54" X2="88.71429" Y2="50" Text="Direction" FontSize="18" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="22" EndConnectionPointId="FIGURE_CENTER" EndFigureId="23" /><Rectangle X="88" Y="47" Width="7" Height="3" FillColor="#D3E3FC" Text="Append player uid to target scene state" FontSize="18" FontColor="#0045A3" FigureId="23" /><LineConnection X1="88.25" Y1="47" X2="81.75" Y2="44" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="23" EndConnectionPointId="FIGURE_CENTER" EndFigureId="24" /><Rectangle X="35" Y="41" Width="6" Height="3" FillColor="#D3E3FC" Text="Switch language in player fsm state" FontSize="18" FontColor="#0045A3" FigureId="25" /><LineConnection X1="44" Y1="42.5" X2="41" Y2="42.5" Text="Lang" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="16" EndConnectionPointId="FIGURE_CENTER" EndFigureId="25" /><LineConnection X1="13.20161" Y1="20" X2="19.00806" Y2="15" Text="Pass xml response" FontSize="18" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="7" EndConnectionPointId="FIGURE_CENTER" EndFigureId="1" /><OrthoginalPathConnection Text="Switch language success text" FontSize="18" Filled="False" Definition="M35 42.5 L25.25 42.5 C25.1125 42.5 25 42.3875 25 42.25 L25 21.5 C25 21.3625 24.8875 21.25 24.75 21.25 L15 21.25" EndDecoration="ARROW" CornerRadius="0.25" Direction="EAST_WEST" StartConnectionPointId="FIGURE_CENTER" StartFigureId="25" EndConnectionPointId="FIGURE_CENTER" EndFigureId="7" /><OrthoginalPathConnection Text="Enters scene" FontSize="18" Filled="False" Definition="M19 58 L53.25 58 C53.3875 58 53.5 57.8875 53.5 57.75 L53.5 48.75 C53.5 48.6125 53.6125 48.5 53.75 48.5 L88 48.5" EndDecoration="ARROW" CornerRadius="0.25" Direction="EAST_WEST" StartConnectionPointId="FIGURE_CENTER" StartFigureId="5" EndConnectionPointId="FIGURE_CENTER" EndFigureId="23" /><Rectangle X="75" Y="41" Width="7" Height="3" FillColor="#D3E3FC" Text="Process enter scene event if any" FontSize="18" FontColor="#0045A3" FigureId="24" /><LineConnection X1="82" Y1="42.5" X2="88" Y2="42.5" EndDecoration="ARROW" StartConnectionPointId="FIGURE_CENTER" StartFigureId="24" EndConnectionPointId="FIGURE_CENTER" EndFigureId="14" /></Layer></Drawing>